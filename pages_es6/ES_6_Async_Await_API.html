<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="../images/favicon.ico" />
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
  <link href="../css/mainStyle.css" rel="stylesheet" />
  <title>Async Await</title>
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top gradienHeader">
      <div class="container-fluid">
        <a class="navbar-brand" href="../index.html">
          <img src="../images/favicon.ico" alt="" width="30" height="24" class="d-inline-block align-text-top">
          <b><span class="logoOrange">स्व</span><span class="logoWhite">रा</span><span class="logoGreen">ज</span></b>
          UI</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="../index.html">Home</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages_html/HTML_Dashboard.html">HTML</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages_css/CSS_Dashboard.html">CSS</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages_js/Javascript_Dashboard.html">JavaScript</a>
            </li>

            <li class="nav-item">
              <a class="nav-link active" href="ES_6_Dashboard.html">ECMA 6</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages_node_js/Node_JS_Dashboard.html">Node JS</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main class="mainBody">
    <section class="pageHeader">
      <div class="container">
        <div class="row">
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
            <div class="pull-left">
              <h1>How to fetch API with async await ?</h1>
            </div>

            <div class="pull-right">
              <a href="ES_6_Dashboard.html" class="btn btn-dark btn-sm mt-2">
                <i class="fa fa-arrow-left" aria-hidden="true"></i>
                Back to Dashboard </a>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
      </div>
    </section>

    <div class="container">
      <div class="row">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
          <p>
            Together, async/await and the Fetch API both provide a powerful, efficient, and easy to understand.
          </p>

          <p>
            Async/await works by allowing developers to define functions as async and then use the await keyword to wait
            for the result of a promise to resolve.
          </p>

          <p>
            Fetch API is designed to work with asynchronous operations, which allows making the requests to an API or server
            without blocking the main thread of the application and always fetch() method returns a Promise.
          </p>

          <hr class="bg-primary"/>

          <p>
            <img src="../images/async_await_API_1.png" alt="async_await_API_1" class="img-fluid" />
          </p>

          <hr class="bg-primary"/>

          <p>
            <img src="../images/async_await_API_2.png" alt="async_await_API_2" class="img-fluid" />
          </p>

          <hr class="bg-primary"/>

          <p>
            <img src="../images/async_await_API_3.png" alt="async_await_API_3" class="img-fluid" />
          </p>
        </div>
      </div>
    </div>
  </main>

  <footer class="siteFooter">
    <div class="container">
      <div class="row">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
          <span class="footerContent">Copyright &copy; All right Reserved <span id="currentYear"></span></span>
        </div>
      </div>
    </div>
  </footer>

  <script src="../js/jquery.min.js"></script>
  <script src="../js/bootstrap.bundle.min.js"></script>
  <script>
    // Copyright Year script
    const now = new Date();
    let year = now.getFullYear();
    document.getElementById("currentYear").innerHTML = year;
  </script>

  <script>
    // Example 1
    // this basic async await function for API calling
    const userInfo = async () => {
      const res = await fetch('https://dummyjson.com/users');
      const response = await res.json();
      // here you are getting the response from API
      // Now you can loop for showing at UI
    }
    userInfo();

    /***************************************/

    // Example 2
    // Now we can also use the try catch block for handling async await
    // this is a best approach for Error handling

    const productsInfo = async () => {
      try {
        const res = await fetch('https://fakestoreapi.com/products');
        const response = await res.json();
        // console.log('productsInfo response =', response);
        // here you are getting the response from API
        // Now you can loop for showing at UI
      }
      catch (error) {
        console.log('productsInfo Error =', error);
      }
    }
    productsInfo();

    /***************************************/


    // Example 3 including filter method also
    let userdData = [];
    const fetchingUsers = async() => {
      const url = 'https://dummyjson.com/users';
      try {
        const response = await fetch(url);
        const res = await response.json();
        console.log('fetchingUsers =', res.users);
        userdData = res.users;
        console.log('userdData =', userdData);
        
         // filter method: with return statement
        const age40 = userdData.filter((item) => {
          return item.age > 40
        });
        console.log('ages 35 =', age40);

        // filter method: with one line only
        const age35 = userdData.filter((item) => item.age > 35);
        console.log('ages 35 =', age35);
      }

      catch(error) {
        console.log('fetchingUsers =', error);
      }
    }
    fetchingUsers();


  </script>
</body>
</html>